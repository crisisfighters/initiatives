<!DOCTYPE HTML>
<html>
<head>
    <title>ExtinctionFighters.org</title>
    <meta charset="utf-8"/>
    <link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>ExtinctionFighters.org</h1>
<p>
    This website wants to collaboratively collect and assess initiatives fighting extinction.<br/>
    That is the breakdown of civilization due to the unmitigated climate and biodiversity crises.<br/>
    We sympathize but are not affiliated with <a href="https://rebellion.earth/">extinction rebellion</a>.</p>

<h2>Motivation and Background</h2>
<p>Calls to change individual behavior distract from what‚Äôs necessary. Our planet will become largely uninhabitable
    unless we quickly move the political mainstream to enforcing immediate, impactful action. Assessing the efficiency
    of existing and new initiatives in a crowd-sourced, data-driven way allows to efficiently funnel resources (time &
    money) to give us a fighting chance. <a href="https://medium.com/@alexthiel/stop-climate-change-ea99133daac5">More on Medium</a>.</p>
<hr/>
<h1>Initiatives</h1>
<p>The following data needs to be updated and improved by all of us. Please scroll down to find out how to <a
        href="#contribute">contribute</a> - it's simple!</p>
<table id="grid2">
    <thead>
    </thead>
    <tbody>
    </tbody>
</table>
<hr/>
<a name="contribute"/>
<h1>Contribute</h1>
<p>You can <b>add initiatives</b>, <b>update data</b> and make other changes to this website - it's open source and easy
    to improve.<br/>
    Please go to <a
            href="https://github.com/extinctionfighters/initiatives">github.com/extinctionfighters/initiatives</a>
    (scroll
    down the page) to contribute.</p>
<p>If you don't have a GitHub account or are not used to it (yes, it's a bit nerdy), drop us an email at <a
        href="mailto:hello@extinctionfighters.org">hello@extinctionfighters.org</a>!</p>

<hr/>
<p>Made with üòÄ and ‚ù§Ô∏è on üåè</p>

<script src="data.js"></script>
<script src="fields.js"></script>
<script>

    (() => {

        document.querySelector("#grid2 thead")
            .insertAdjacentHTML(
                'beforeend',
                Object.keys(fields)
                    .reduce(
                        (acc, group) => [
                            [
                                ...acc[0],
                                `<th class="${group}" colspan="${Object.keys(fields[group].children).length}">${fields[group].title}</th>`
                            ],
                            [
                                ...acc[1],
                                ...Object.keys(fields[group].children).map(field => `<th class="${group}">${fields[group].children[field].title}</th>`),
                            ],
                        ],
                        [[], []]
                    )
                    .map(thSet => `<tr>${thSet.join('\n')}</tr>`)
                    .join('\n'));


        const flatFields = Object.keys(fields)
            .reduce(
                (acc, group) => ({
                    ...acc,
                    ...fields[group].children
                }),
                {});

        const render = content =>
            `<td>${
                content === undefined
                    ? '-'
                    : typeof content === "string"
                    ? content
                    : `<span class="updated">${content.updatedBy} (${content.updatedAt}):</span>${content.content}`
                }</td>`
        ;

        document.querySelector("#grid2 tbody")
            .insertAdjacentHTML(
                'beforeend',
                data.map(row => `<tr>${
                    Object.keys(flatFields)
                        .map(field => render(row[field]))
                        .join('')
                    }</tr>`)
                    .join('\n')
            );
    })();
</script>
</body>
</html>